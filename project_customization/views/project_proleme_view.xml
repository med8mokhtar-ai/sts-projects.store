<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Form View -->
    <record id="view_project_probleme_form" model="ir.ui.view">
        <field name="name">project.probleme.form</field>
        <field name="model">project.probleme</field>
        <field name="arch" type="xml">
            <form>
                <sheet>

                    <group>

                        <field name="project_id"/>
                        <field name="market_type_id"/>
                        <field name="autorite_contractante"/>
                        <!-- <field name="titulaires"/> -->
                        <field name="date" class="oe_inline"/>
                        <field name="jalon_id" class="oe_inline"/>
                        <field name="project_update_id" class="oe_inline"/>
                         <field name="severity" widget="priority"/>
                        <field name="resolved" />
                    </group>
                    <notebook>
                        <page name="motif" string="Motif">

                            <button class="btn btn-outline-primary oe_stat_button" type="object" name="open_view_project_task" string="Créer un plan d'actions"/>
                            <field name="motif" placeholder="Décris le problème..."/>
                        </page>
                        <page name="action_corrective" string="Action corrective">
                            <field name="action_corrective" placeholder="Décris la solution..."/>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                        <field name="message_follower_ids" options="{'open_attachments': True}"/>
                        <field name="message_ids"/>
                </div>

            </form>
        </field>
    </record>

    <!-- Tree View -->
    <record id="project_probleme_tree" model="ir.ui.view">
        <field name="name">project.probleme.tree</field>
        <field name="model">project.probleme</field>
        <field name="arch" type="xml">
             <tree create="1">
                        <field name="project_id"/>
                        <field name="market_type_id"/>
                        <field name="autorite_contractante"/>
                        <!-- <field name="titulaires"/> -->
                        <field name="date"/>
                        <field name="jalon_id"/>
                        <field name="project_update_id"/>
                        <field name="severity" widget="priority" readonly="1"/>
                        <field name="resolved" />

            </tree>
        </field>
    </record>
        <record id="project_probleme_pivot_view" model="ir.ui.view">
       <field name="name">project.probleme.pivot.view</field>
       <field name="model">project.probleme</field>
       <field name="arch" type="xml">
           <pivot string="Analyse des problèmes">
                    <field name="project_id" type="row"/>
           </pivot>
       </field>
    </record>
    <!--project.update customized graph view-->
    <record id="project_probleme_view_graph" model="ir.ui.view">
        <field name="name">project.probleme.view.graph</field>
        <field name="model">project.probleme</field>
        <field name="arch" type="xml">

            <graph string="Analyse des problèmes" sample="1"  >
                    <field name="project_id"/>

            </graph>
        </field>
    </record>

    <record id="project_probleme_filter" model="ir.ui.view">
        <field name="name">project_probleme.filter</field>
        <field name="model">project.probleme</field>
        <field name="arch" type="xml">
                    <search>

                        <filter string="Nature" name="nature" domain="[('severity', '=', '1')]" />
                        <filter string="Gravité" name="gravite" domain="[('severity', '=', '2')]" />
                        <filter string="Urgence" name="urgence" domain="[('severity', '=', '3')]" />
                        <filter string="Résolu/Oui" name="resolved" domain="[('resolved', '=', True)]" />
                        <filter string="Résolu/Non" name="resolved" domain="[('resolved', '=', False)]" />
                        <field name="market_type_id"/>

                         <field name="severity"/>
                        <group string="Group By..." expand="0" name="marche">
                            <filter string="Type du marché" name="group_type_marche" context="{'group_by': 'market_type_id'}"/>
                        </group>
                        <group string="Group By..." expand="0" name="severity">
                            <filter string="Sévérité" name="group_severity" context="{'group_by': 'severity'}"/>
                        </group>
                    </search>
        </field>
    </record>

    <!-- Action Window -->
    <!-- <record id="action_project_probleme" model="ir.actions.act_window">
        <field name="name">Analyse des problèmes</field>
        <field name="res_model">project.probleme</field>
        <field name="view_mode">tree,form,graph,pivot</field>
    </record> -->

</odoo>
