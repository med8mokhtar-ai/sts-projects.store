<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record
            id="project_update_all_action" model="ir.actions.act_window">
            <field name="name">Graphiques</field>
            <field name="res_model">project.update</field>
            <field name="view_mode">graph</field>
            <field name="domain">[('project_id', '=', active_id)]</field>
            <field name="search_view_id" ref="project_update_view_search" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No updates found. Let's create one!
                </p>
                <p>
                    Get a snapshot of the status of your project and share its progress with key
        stakeholders.
                </p>
            </field>
        </record>
        ' <!--project.project
        customized search view-->
        <record
            id="view_project_project_filter_custom" model="ir.ui.view">
            <field name="name">project.project.search.custom</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <search string="Custom Search Project">
                    <!-- Add basic search fields -->
                    <field name="numero_marche" string="Numéro" />
                    <field name="name" string="Objet" />
                    <field name="autorite_contractante" string="Autorité contractante" />
                    <field name="titulaires" string="Titulaire" />
                    <field name="project_managers" string="Chefs des projets" />

                    <!-- Add group by filters -->
                    <group expand="0" string="Group By">
                        <filter string="Autorité contractante" name="group_by_autorite_contractante"
                            context="{'group_by': 'autorite_contractante'}" />
                        <filter string="Titulaire" name="group_by_titulaires"
                            context="{'group_by': 'titulaires'}" />
                        <filter string="Type du marché" name="Type"
                            context="{'group_by': 'market_type_id'}" />
                        <filter string="Année" name="group_by_annee_marche"
                            context="{'group_by': 'annee_marche'}" />
                        <filter string="Date de commencement" name="group_by_date_start"
                            context="{'group_by': 'date_start'}" />
                        <filter string="Date prévisionnelle d’achèvement" name="group_by_date"
                            context="{'group_by': 'date'}" />
                    </group>
                </search>
            </field>
        </record>
        <!-- Custom Search Marchés Contrôlés -->
        <record
            id="view_project_project_filter_controle_projets" model="ir.ui.view">
            <field name="name">project.project.select.controle.projets</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <search string="Custom Search Marchés Contrôlés">
                    <!-- Add basic search fields -->
                    <field name="numero_marche" string="Numéro" />
                    <field name="name" string="Objet" />
                    <field name="autorite_contractante" string="Autorité contractante" />
                    <field name="titulaires" string="Titulaire" />
                    <field name="project_managers" string="Chefs des projets" />

                    <!-- Add group by filters -->
                    <group expand="0" string="Group By">
                        <filter string="Autorité contractante" name="group_by_autorite_contractante"
                            context="{'group_by': 'autorite_contractante'}" />
                        <filter string="Titulaire" name="group_by_titulaires"
                            context="{'group_by': 'titulaires'}" />
                        <filter string="Type du marché" name="Type"
                            context="{'group_by': 'market_type_id'}" />
                        <filter string="Plage d’avancement" name="plage"
                            context="{'group_by': 'plage'}" />
                        <filter string="Année" name="group_by_annee_marche"
                            context="{'group_by': 'annee_marche'}" />
                        <filter string="Statut" name="group_by_mission_statut"
                            context="{'group_by': 'last_update_status_mission'}" />
                        <filter string="Date de commencement" name="group_by_date_start"
                            context="{'group_by': 'date_start'}" />
                        <filter string="Date prévisionnelle d’achèvement" name="group_by_date"
                            context="{'group_by': 'date'}" />
                    </group>

                    <!-- Add specific filters -->
                    <filter string="Décaissement dépasse avancement" name="decaissement_depasse_av"
                        domain="[('decaissement_depasse_av', '=', True)]" />
                    <separator />
                    <filter string="Conformité Matériel" name="filter_conf_materiel"
                        domain="[('percentage_conf_materiel', '&gt;=', 100)]" />
                    <separator />
                    <filter string="Conformité Personnel" name="filter_conf_personnels"
                        domain="[('percentage_conf_personnels', '&gt;=', 100)]" />
                    <separator />
                    <filter string="Pénalités théoriques" name="filter_penalite_theoriques"
                        domain="[('penalite_plafone_gap', '!=', 0)]" />
                    <separator />
                    <filter string="Pénalités appliquées" name="filter_penalite_appliquees"
                        domain="[('montant_total_penalite_gap', '!=', 0)]" />
                </search>
            </field>
        </record>

        <!-- Custom Search Marchés Suivis -->
        <record
            id="view_project_project_filter_suivi_projets" model="ir.ui.view">
            <field name="name">project.project.select.suivi.projets</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <search string="Custom Search Marchés Suivis">
                    <!-- Add basic search fields -->
                    <field name="numero_marche" string="Numéro" />
                    <field name="name" string="Objet" />
                    <field name="autorite_contractante" string="Autorité contractante" />
                    <field name="titulaires" string="Titulaire" />
                    <field name="project_managers" string="Chefs des projets" />

                    <!-- Add group by filters -->
                    <group expand="0" string="Group By">
                        <filter string="Autorité contractante" name="group_by_autorite_contractante"
                            context="{'group_by': 'autorite_contractante'}" />
                        <filter string="Titulaire" name="group_by_titulaires"
                            context="{'group_by': 'titulaires'}" />
                        <filter string="Type du marché" name="Type"
                            context="{'group_by': 'market_type_id'}" />
                        <filter string="Plage d’avancement" name="plage"
                            context="{'group_by': 'plage'}" />
                        <filter string="Année" name="group_by_annee_marche"
                            context="{'group_by': 'annee_marche'}" />
                        <filter string="Statut" name="group_by_mission_statut"
                            context="{'group_by': 'last_update_status_mission'}" />
                        <filter string="Date de commencement" name="group_by_date_start"
                            context="{'group_by': 'date_start'}" />
                        <filter string="Date prévisionnelle d’achèvement" name="group_by_date"
                            context="{'group_by': 'date'}" />
                    </group>

                    <!-- Add specific filters -->
                    <filter string="Décaissement dépasse avancement" name="decaissement_depasse_av"
                        domain="[('decaissement_depasse_av', '=', True)]" />
                    <separator />
                    <filter string="Conformité Matériel" name="filter_conf_materiel"
                        domain="[('percentage_conf_materiel', '&gt;=', 100)]" />
                    <separator />
                    <filter string="Conformité Personnel" name="filter_conf_personnels"
                        domain="[('percentage_conf_personnels', '&gt;=', 100)]" />
                    <separator />
                    <filter string="Pénalités théoriques" name="filter_penalite_theoriques"
                        domain="[('penalite_plafone_gap', '!=', 0)]" />
                    <separator />
                    <filter string="Pénalités appliquées" name="filter_penalite_appliquees"
                        domain="[('montant_total_penalite_gap', '!=', 0)]" />
                </search>
            </field>
        </record>

        <!-- Custom Search Grands Projets -->
        <record
            id="view_project_project_filter_grands_projets" model="ir.ui.view">
            <field name="name">project.project.select.grands.projets</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <search string="Custom Search Project">
                    <!-- Add basic search fields -->
                    <field name="numero_marche" string="Numéro" />
                    <field name="name" string="Objet" />
                    <field name="autorite_contractante" string="Autorité contractante" />
                    <field name="titulaires" string="Titulaire" />
                    <field name="project_managers" string="Chefs des projets" />

                    <!-- Add group by filters -->
                    <group expand="0" string="Group By">
                        <filter string="Autorité contractante" name="group_by_autorite_contractante"
                            context="{'group_by': 'autorite_contractante'}" />
                        <filter string="Titulaire" name="group_by_titulaires"
                            context="{'group_by': 'titulaires'}" />
                        <filter string="Type du marché" name="Type"
                            context="{'group_by': 'market_type_id'}" />
                        <!-- <filter string="Plage d’avancement" name="plage" context="{'group_by':
                        'plage'}"/> -->
                        <filter string="Année" name="group_by_annee_marche"
                            context="{'group_by': 'annee_marche'}" />
                        <!-- <filter string="Statut" name="group_by_collect_statut"
                        context="{'group_by': 'status_collect'}"/> -->
                        <filter string="Date de commencement" name="group_by_date_start"
                            context="{'group_by': 'date_start'}" />
                        <filter string="Date prévisionnelle d’achèvement" name="group_by_date"
                            context="{'group_by': 'date'}" />
                    </group>

                    <!-- Add specific filters -->
                    <!-- <filter string="Décaissement dépasse avancement"
                    name="decaissement_depasse_av" domain="[('decaissement_depasse_av', '=',
                    True)]"/>
                    <separator/>
                    <filter string="Conformité Matériel" name="filter_conf_materiel"
                    domain="[('percentage_conf_materiel', '&gt;=', 100)]"/>
                    <separator/>
                    <filter string="Conformité Personnel" name="filter_conf_personnels"
                    domain="[('percentage_conf_personnels', '&gt;=', 100)]"/>
                    <separator/>
                    <filter string="Pénalités théoriques" name="filter_penalite_theoriques"
                    domain="[('penalite_plafone_gap', '!=', 0)]"/>
                    <separator/>
                    <filter string="Pénalités appliquées" name="filter_penalite_appliquees"
                    domain="[('montant_total_penalite_gap', '!=', 0)]"/> -->
                </search>
            </field>
        </record>

        <!-- new search view for marche numerotees menu -->
        <record
            id="view_project_project_filter_marches_en_cours" model="ir.ui.view">
            <field name="name">project.project.select.marches.en.cours</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <!-- Add additional search fields -->
                <search string="Custom Search Project">
                    <field name="numero_marche" string="Numéro" />
                    <field name="name" string="Objet" />
                    <field name="autorite_contractante" string="Autorité contractante" />
                    <field name="titulaires" string="Titulaire" />
                    <field name="annee_marche" string="Année" />
                    <field name="project_managers" string="Chefs des projets" />

                    <group expand="0" string="Group By">
                        <filter string="Autorité contractante" name="group_by_autorite_contractante"
                            context="{'group_by': 'autorite_contractante'}" />
                        <filter string="Titulaire" name="group_by_titulaires"
                            context="{'group_by': 'titulaires'}" />
                        <filter string="Année" name="group_by_annee_marche"
                            context="{'group_by': 'annee_marche'}" />
                        <filter string="Date de commencement" name="group_by_date_start"
                            context="{'group_by': 'date_start'}" />
                        <filter string="Date prévisionnelle d’achèvement" name="group_by_date"
                            context="{'group_by': 'date'}" />
                    </group>
                </search>
            </field>
        </record>

        <!--action
        window that returns project milestones-->
        <record
            id="action_project_milestones" model="ir.actions.act_window">
            <field name="name">Jalons du projet</field>
            <field name="res_model">project.milestone</field>
            <field name="view_mode">tree,form,graph</field>
            <field name="domain">[('project_id', '=', active_id)]</field>
            <field name="context">{'project_id':active_id}</field>
        </record>
        <!--Menu
        item for the project attachments-->
        <!-- <menuitem id="menu_attachment_custom" name="Livrables" parent="project.menu_main_pm"
        action="action_attachment_custom"/> -->
        <record
            id="project.open_create_project" model="ir.actions.act_window">
            <field name="name">Create a Project</field>
            <field name="res_model">project.project</field>
            <field name="view_mode">kanban,tree,form,calendar,activity</field>
            <field name="view_id" ref="project.edit_project" />
            <field name="search_view_id"
                ref="project_customization.view_project_project_filter_custom" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No projects found. Let's create one!
                </p>
                <p>
                    Create projects to organize your tasks. Define a different workflow for each
        project.
                </p>
            </field>
        </record>
        <record
            id="project.project_view_kanban_inherit_project" model="ir.ui.view">
            <field name="active">false</field>
        </record>
        <!--project.project
        customized form view-->
        <record id="edit_project"
            model="ir.ui.view">
            <field name="name">project.project.form</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.edit_project" />
            <field name="arch" type="xml">
                <xpath expr="//form/header/button[@data-hotkey='r']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <button name="project_update_all_action" position="attributes">
                    <attribute name="invisible">1</attribute>
                </button>
                <xpath expr="//form/header" position="inside">
                    <widget name="attach_document" string="Joindre un document"
                        action="message_post" groups="project.group_project_manager" />
                </xpath>
                <xpath expr="//button[@name='action_view_tasks']" position="attributes">
                    <attribute name="groups">project.group_project_manager</attribute>
                </xpath>
                <xpath expr="//button[@name='action_view_tasks']" position="before">
                    <button class="oe_stat_button" type="action"
                        name="%(project_customization.project_update_all_action)d"
                        icon="fa-bar-chart">
                        <!-- <field string="Historique des changements" name="last_update_status"
                        widget="status_with_color" readonly="1"/> --> Graphiques </button>
                    <button groups="project.group_project_manager" name="open_view_project_mission"
                        class="oe_stat_button" icon="fa-bullseye" type="object">
                        <field name="count_project_mission" widget="statinfo" string="Missions" />
                    </button>
                    <button groups="project.group_project_manager" class="oe_stat_button"
                        type="object" name="project_feedback_action" icon="fa-refresh">
                        <field string="Mises à jour" name="feedback_count" widget="statinfo" />
                    </button>


                    <button class="oe_stat_button" type="action"
                        name="%(project_customization.action_project_milestones)d" icon="fa-flag"
                        groups="project.group_project_manager">
                        <field string="Jalons" name="milestone_count" widget="statinfo" />
                    </button>
                    <button class="oe_stat_button" type="object" name="open_view_project_avenant"
                        icon="fa-wrench">
                        <field string="Avenants" name="count_project_avenant" widget="statinfo" />
                    </button>
                    <button class="oe_stat_button" type="object"
                        name="open_view_financial_transacrion" icon="fa-money"
                        groups="project.group_project_manager">
                        <field string="Situation financière" name="count_financial_transactions"
                            widget="statinfo" />
                    </button>

                    <button name="action_open_sub_projects" type="object" class="oe_stat_button"
                        invisible="subprojects_count == 0" groups="project.group_project_manager">
                        <field name="subprojects_count" widget="statinfo"
                            string="Marchés de Contrôle" />
                    </button>
                    <!-- End Ebnou notes -->

                    <button groups="project.group_project_manager" class="oe_stat_button"
                        type="object" name="open_view_res_partner_appraisal" icon="fa-smile-o">
                        <field string="Antécédents de non exécution" name="count_appraisal"
                            widget="statinfo" />
                    </button>
                    <button groups="project.group_project_manager" name="action_get_attachment_view"
                        class="oe_stat_button" icon="fa-book" type="object">
                        <field name="doc_count" widget="statinfo" string="Pièces jointes" />
                    </button>
                    <!-- <button groups="project_customization.group_project_minister"
                    name="action_get_attachment_view_report" class="oe_stat_button" icon="fa-book"
                    type="object">
    Rapport
                    </button>
                    <button groups="project_customization.group_project_minister"
                    name="action_get_attachment_view_video" class="oe_stat_button"
                    icon="fa-video-camera" type="object">
    Vidéo
                    </button>
                    <button groups="project_customization.group_project_minister"
                    name="action_get_attachment_view_galeries" class="oe_stat_button"
                    icon="fa-image" type="object">
    Galeries
                    </button> -->

                    <button groups="project.group_project_manager" class="oe_stat_button"
                        type="object" name="project_stop_station_action" icon="fa-stop">
                        <field string="Arrêts" name="stop_station_count" widget="statinfo" />
                    </button>
                </xpath>

                <xpath expr="//button[@name='%(project.project_collaborator_action)d']"
                    position="after">
                    <button class="oe_stat_button" name="action_get_graph" type="object"
                        icon="fa-tasks" groups="project.group_project_manager">
                        <div class="o_field_widget o_stat_info">
                            <span class="o_stat_text">
                                Analyse des jalons
                            </span>
                        </div>
                    </button>
                    <!-- <button groups="project.group_project_manager" class="oe_stat_button"
                    name="action_project_changes" type="object" icon="fa-history">
                        <div class="o_field_widget o_stat_info">

                            <span class="o_stat_text">
                                Historique des changements
                            </span>
                        </div>
                    </button> -->
                </xpath>
                <xpath expr="//page[@name='settings']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='label_tasks']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='tag_ids']" position="attributes">
                    <attribute name="groups">project.group_project_manager</attribute>
                </xpath>


                <!-- <xpath expr="//sheet/group/group/field[@name='partner_id']" position="after">
                    <field name="user_id" string="Responsable de suivi" widget="many2one_avatar_user"/>
                </xpath> -->
                <xpath expr="//sheet/group/group/field[@name='partner_id']" position="after">
                    <field name="numero_marche" string="Numéro du marché" />
                    <field name='market_type_id' required="True" nolabel="0" />
                    <field name='autorite_contractante'
                        required="market_type_name != 'Projet interne'"
                        invisible="market_type_id and market_type_name == 'Projet interne'" />
                    <field name="project_managers" string="Chefs des projets" widget="many2many_tags" />

                    <field name="secteur_id" />
                    <field name="commission_passation" string="Commission" nolabel="0" />
                    <field name="titulaires" string="Titulaire" widget="many2many_tags" />
                    <field name="budget" string="Montant total (MI+AV)"
                        help="Montant initial + Avenants" widget="monetary"
                        options="{'currency_field': 'currency_id'}" />
                    <field name="delai_execution" />
                    <!-- <field name="delai_execution_apres_avenant"/> -->
                    <field name="delai_execution_apres_avenant" widget="integer"
                        options="{'unit': 'days'}" />

                    <field name="user_id" string="Responsable de suivi"
                        widget="many2one_avatar_user" />

                    <!-- <field name="rapport_delais" widget="project_custom_progressbar"
                    help="Délai consommé / delai_execution"/> -->
                    <!-- <field name="retard_constate" hepl="Délai consommé - Délai prévisionnel"
                    invisible="retard_constate==0"/> -->
                    <!-- <field name="duree_restante" hepl="Délai prévisionnel  - Délai consommé"
                    invisible="duree_restante==0"/> -->

                </xpath>
                <xpath expr="//sheet/group/group/field[@name='partner_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <!-- <xpath
                expr="//sheet/notebook/page[2]/group/group/field[@name='analytic_account_id']"
                position="attributes">
                    <attribute name="context">{}</attribute>
                </xpath> -->

                <xpath expr="//sheet/group/group[2]/field[@name='user_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='user_id']" position="replace">
                    <field name="market_type_name" invisible="True" />
                    <field name='department_id' invisible="market_type_name != 'Projet interne'" />
                </xpath>
                <xpath expr="//field[@name='date_start']" position="replace">
                    <field name="date_start" string="Date d’entrée en vigueur" />
                    <field name="date" string="Date prévisionnelle d’achèvement" />
                </xpath>
                <xpath expr="//sheet/group/group/field[@name='company_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//sheet/group" position="after">

                    <group>

                        <group>
                            <separator string="Données de la mission" colspan="2"
                                style="text-transform: none !important;" />
                            <field name="last_update_date" string="Date de la mission" />
                            <field name="last_update_status_mission" string="Statut"
                                widget="status_with_color" />
                            <field name="calculated_achievement" widget="progressbar_no_rounding"
                                string="Avancement" />
                            <field name="last_update_decaissement"
                                widget="project_custom_progressbar" string="Décaissement" />
                            <field name="last_update_consom_delai" string="Délai Consommé"
                                widget="progressbar_no_rounding" />
                            <field name='percentage_conf_personnels'
                                widget="progressbar_no_rounding" />
                            <field name='percentage_conf_materiel' widget="progressbar_no_rounding" />
                            <!-- <field name='observation_number'
                                string="Nombre des observations (anomalies)"
                                groups="project.group_project_manager" /> -->
                        </group>

                        <group>
                            <separator string="Données récupérées" colspan="2"
                                style="text-transform: none !important;" />
                            <field name="date_derniere_mise_a_jour_collect" widget="date"
                                string="Date" />
                            <field name="status_collect" widget="status_with_color" string="Statut" />
                            <field name="achievement_collect" widget="progressbar_no_rounding"
                                string="Avancement" />
                            <field name="decaissement_collect" widget="project_custom_progressbar"
                                string="Décaissement" />
                            <field name="delai_consomme_collect" widget="progressbar_no_rounding"
                                string="Délai Consommé" />
                        </group>
                    </group>
                </xpath>
                <xpath expr="//field[@name='date']" position="after">
                    <field name="plage" widget="selection_badge" string="plage d’avancement" />
                    <field name="penalite_plafone" widget="monetary" />
                    <field name="penalite_plafone_gap" widget="progressbar_no_rounding"
                        string="Pourcentage théorique" />
                    <field name="montant_total_penalite" widget="monetary"
                        options="{'currency_field': 'currency_id'}" />
                    <field name="montant_total_penalite_gap" string="Pourcentage appliqué"
                        widget="progressbar_no_rounding" />
                    <field name="montant_total_remise_penalite" widget="monetary"
                        options="{'currency_field': 'currency_id'}" />
                    <field name="montant_total_remise_penalite_gap" string="Pourcentage"
                        widget="progressbar_no_rounding" />
                </xpath>


                <xpath expr="//page[@name='description']" position="attributes">
                    <attribute name="string">Objet</attribute>
                    <attribute name="name">objet</attribute>
                </xpath>


                <xpath expr="//page[@name='settings']" position="after">
                    <page name="other_infos" string="Données générales">
                        <group>
                            <group string="Dates">
                                <field name="date_publication_avis" string="Publication avis"
                                    invisible="1" />
                                <field name="date_ouverture_offres" string="Ouverture offres"
                                    invisible="1" />
                                <field name="date_evaluation_offres" string="Evaluation offres"
                                    invisible="1" />
                                <field name="date_signature" string="Signature" />
                                <field name="date_notification" string="Notification" />
                                <field name="date_remise_site" string="Remise du site" />
                                <field name="date_attribution" string="Attribution" invisible="1" />
                                <field name="date_noti_deb_ex"
                                    string="Notification de l'ordre d'exécution" />
                                <field name="date_p_a_demarrage" string="Paiement avance démarrage" />
                                <field name="date_mise_mission_c"
                                    string="Mise en place de la mission de contrôle" />
                                <field name="other_date" />
                                <field name="other_date_description" invisible="other_date==False" />
                                <field name="date_entr_vig"
                                    string="Entrée en vigueur / Début d'exécution contractuel"
                                    widget="radio" />
                            </group>
                            <group string="Autres">
                                <group>
                                    <field name='handling_mode_ids' widget="many2many_tags" />
                                    <field name="nationnalite_titulaire" />
                                </group>
                                <group>
                                    <field name="anteced_ret_exec" string="Antécéd.non.Exéc"
                                        widget='radio' />

                                </group>

                                <!-- feed back fields -->

                                <group>
                                    <field name="sous_traitance" string="Sous traitance"
                                        widget='radio' />
                                    <field name="sous_traitance_gap"
                                        widget="progressbar_no_rounding" options="{'editable':true}"
                                        string="Sous traitance(%)"
                                        invisible="sous_traitance != 'yes'" />


                                </group>


                                <group>

                                    <field name="resiliation" string="Résiliation" widget='radio' />

                                    <field name="resiliation_date" string="Date Résiliation"
                                        required="resiliation == 'yes'"
                                        invisible="resiliation != 'yes'" />


                                </group>
                                <!-- <group>
                                    <field name="bureau_de_control" />
                                    <field name="bureau_de_suivi" />
                                </group> -->


                            </group>
                        </group>
                    </page>
                </xpath>
                <!--project
                KPIs page -->


                <xpath expr="//page[@name='other_infos']" position="after">
                    <page name="financial_info" string="Données financières">
                        <group>
                            <group name="prevision" string="Contrat initial">
                                <group>
                                    <field name="currency_id" invisible="1"></field>
                                    <field name="montant_initial" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                    <field name="budget" string="Montant total (MI+AV)"
                                        help="Montant initial + Avenants" widget="monetary"
                                        options="{'currency_field': 'currency_id'}"
                                        groups="project.group_project_manager" />
                                    <field name='funding_mode_ids' widget="many2many_tags" />
                                    <field name="regime_fiscal" />
                                    <field name="credit_impot" invisible="regime_fiscal==False"
                                        string="Credit impot" />
                                </group>
                                <group colspan="2">
                                    <group>
                                        <field name="montant_total_cautions_bonne_ex"
                                            widget="monetary"
                                            options="{'currency_field': 'currency_id'}" />
                                    </group>
                                    <group>
                                        <field name="montant_total_cautions_bonne_ex_gap" string="%"
                                            widget="progressbar_no_rounding" />
                                    </group>
                                </group>
                                <!-- <separator/> -->
                                <!-- Separator -->

                                <!-- Financing Section -->
                                <field name="financing_ids" widget="manyone2many_list"
                                    groups="project.group_project_manager">
                                    <tree editable="bottom"
                                        context="{'default_project_id': active_id}">
                                        <field name="project_id" column_invisible="1" />
                                        <field name="bailleur" string="Bailleur" />
                                        <field name="currency_id" string="Devise" />
                                        <field name="amount" string="Montant" />
                                        <field name="percentage" string="Pourcentage" />
                                        <!-- <field name="exchange_rate" string="Taux d'Échange"/> -->
                                        <!-- <field name="converted_amount"/> -->
                                    </tree>
                                    <!-- <form>
                                            <group>
                                                <field name="bailleur"/>
                                                <field name="currency_id"/>
                                                <field name="amount"/>
                                                <field name="exchange_rate"/>
                                                <field name="converted_amount"/>
                                            </group>
                                        </form> -->
                                </field>

                            </group>


                            <group name="execution" string="Execution">
                                <group>
                                    <field name="montant_total_avenants" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                    <field name="montant_total_ordre_services" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                </group>
                                <group>
                                    <field name="montant_total_avenants_gap" string="%"
                                        widget="progressbar_no_rounding" />
                                    <field name="montant_total_ordre_services_gap" string="%"
                                        widget="progressbar_no_rounding" />

                                </group>
                                <group>
                                    <!-- <field name="montant_total_cautions_bonne_ex"
                                    widget="monetary" options="{'currency_field': 'currency_id'}"/> -->
                                    <field name="montant_total_cautions_bon_fin" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />

                                </group>
                                <group>
                                    <!-- <field name="montant_total_cautions_bonne_ex_gap"
                                    string="%" widget="progressbar_no_rounding" /> -->
                                    <field name="montant_total_cautions_bon_fin_gap" string="%"
                                        widget="progressbar_no_rounding" />

                                </group>

                                <group>
                                    <field name="montant_total_penalite"
                                        string="Pénalités de retard" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                    <field name="montant_total_remise_penalite"
                                        string="Remise des pénalités" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                </group>
                                <group>
                                    <field name="montant_total_penalite_gap" string="%"
                                        widget="progressbar_no_rounding" />
                                    <field name="montant_total_remise_penalite_gap" string="%"
                                        widget="progressbar_no_rounding" />
                                </group>
                                <group>
                                    <field name="montant_total_avance_demarrage" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                    <field name="project_debit" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                </group>
                                <group>
                                    <field name="montant_total_avance_demarrage_gap" string="%"
                                        widget="progressbar_no_rounding" />
                                    <field name="project_debit_gap" string="%"
                                        widget="progressbar_no_rounding" />
                                </group>
                                <group>
                                    <field name="montant_reimbursement_amount" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                    <field name="decaissement" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                </group>
                                <group>
                                    <field name="montant_reimbursement_amount_gap" string="%"
                                        widget="progressbar_no_rounding" />
                                    <field name="decaissement_percentage" string="%"
                                        widget="progressbar_no_rounding" />
                                </group>
                                <group groups="project.group_project_manager">
                                    <field name="decaissement_budget" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                </group>
                                <group groups="project.group_project_manager">
                                    <field name="decaissement_budget_percentage" string="%"
                                        widget="progressbar_no_rounding" />
                                </group>
                            </group>


                        </group>
                    </page>
                    <page name="geo" string="Localisation géographique">
                        <group>
                            <field name="geolocation_ids"
                                context="{'tree_view_ref': 'project_customization.project_geolocation_view_tree', 'default_project_id': id}" />
                        </group>


                    </page>
                    <page name="reception" string="Réception">
                        <group>
                            <field name="project_status" widget="radio"
                                options="{'horizontal':true}" nolabel="1" />
                        </group>
                        <group>
                            <field name="pre_reception_date"
                                invisible="project_status!='pre_reception'" />
                            <field name="pv_de_reception_pre" widget="binary"
                                filename="filename_pre" invisible="project_status!='pre_reception'" />

                            <field name="reception_pro_date"
                                invisible="project_status!='reception_pro'" />
                            <field name="pv_de_reception_pro" widget="binary"
                                filename="filename_pro" invisible="project_status!='reception_pro'" />

                            <field name="reception_def_date"
                                invisible="project_status!='reception_def'" />
                            <field name="pv_de_reception_def" widget="binary"
                                filename="filename_def" invisible="project_status!='reception_def'" />
                        </group>

                    </page>
                    <field name="est_un_marche_de_control" invisible="True" />
                    <page name="marches_control" string="Suivi/Contrôle"
                        invisible="est_un_marche_de_control">
                        <group>
                            <field name="marches_control" widget="many2many_tags"
                                string="Numéro du marché" invisible="est_un_marche_de_control" />
                        </group>
                    </page>


                    <!-- End Ebnou notes -->

                    <!-- <page name="doninig" string="Achèvement" invisible="done_description !=
                    True"> -->
                    <page name="recommendation" string="Conclusions et Recommendations"
                        invisible="not last_comments">
                        <field name="last_comments" />
                    </page>
                    <page name="doninig" string="Achèvement" invisible="done_description == False">
                        <field name="done_description" />

                    </page>
                    <page name="qr_code" string="Code QR">
                        <field name="qr_code" widget="image" />
                        <field name="token" />

                    </page>

                </xpath>
                <!-- Add groups to the fields inside the oe_chatter div -->
                <!-- <xpath expr="//div[@class='oe_chatter']" position="attributes">
                    <attribute name="groups">project.group_project_manager</attribute>
                </xpath> -->
                <xpath expr="//div[@class='oe_chatter']//field[@name='message_follower_ids']"
                    position="attributes">
                    <attribute name="groups">project.group_project_manager</attribute>
                </xpath>

                <xpath expr="//div[@class='oe_chatter']//field[@name='activity_ids']"
                    position="attributes">
                    <attribute name="groups">project.group_project_manager</attribute>
                </xpath>

                <xpath expr="//div[@class='oe_chatter']//field[@name='message_ids']"
                    position="attributes">
                    <attribute name="groups">project.group_project_manager</attribute>
                </xpath>


            </field>
        </record>

        <!--project.project
        customized list view-->
        <record
            id="view_project" model="ir.ui.view">
            <field name="name">project.project.tree</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.view_project" />
            <field name="arch" type="xml">
                <tree position="inside">
                    <header>
                        <button type="object" string="Ajouter le titulaire" name="fill_partner_id"
                            groups="project.group_project_manager" />
                    </header>
                </tree>
                <xpath expr="//tree[1]" position="attributes">
                    <attribute name="default_order">numero_marche asc</attribute>
                    <attribute name="multi_edit">false</attribute>
                </xpath>
                <xpath expr="//field[@name='company_id']" position="attributes">
                    <attribute name="column_invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='display_name']" position="attributes">
                    <attribute name="column_invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="column_invisible">1</attribute>
                </xpath>

                <xpath expr="//field[@name='user_id']" position="attributes">
                    <attribute name="string">Responsable de suivi</attribute>
                    <attribute name="optional">hide</attribute>
                </xpath>
                <xpath expr="//field[@name='stage_id']" position="attributes">
                    <attribute name="optional">hide</attribute>
                </xpath>

                <xpath expr="//field[@name='last_update_status']" position="attributes">
                    <attribute name="optional">hide</attribute>
                </xpath>
                <xpath expr="//button[@name='action_view_tasks']" position="attributes">
                    <attribute name="column_invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='user_id']" position="before">
                    <field name="numero_marche" string="Numéro du marché" />
                    <!-- <field name='description' string="Objet"/> -->
                    <field name='name' string="Objet" />
                    <field name='autorite_contractante' />
                    <field name="project_managers" string="Chefs des projets" widget="many2many_tags" />
                    <field name='titulaires' string="Titulaire" widget="many2many_tags" />
                    <field name='market_type_id' />
                    <field name='currency_id' column_invisible="True" />
                    <field name="budget" widget="monetary"
                        options="{'currency_field': 'currency_id'}" sum="Total" />
                    <field name="calculated_achievement" optional="hide" />
                    <field name="delai_execution" optional="hide" />
                    <!-- <field name="rapport_delais" optional="hide"/> -->
                    <field name="last_update_consom_delai" optional="hide" />
                    <field name="last_update_decaissement" optional="hide" />
                    <field name="project_debit_gap" optional="hide" />

                    <!-- optionnal hide -->
                    <field name="date_start" widget="date" optional="hide" />
                    <field name="date" widget="date" optional="hide" />

                    <field name='secteur_id' optional="hide" />

                    <field name="project_debit" sum="Total debit" optional="hide" />
                    <!-- <field name="project_debit_gap" widget="progressbar_no_rounding"/> -->

                    <!-- optionnal hide -->
                    <field name='funding_mode_ids' optional="hide" />
                    <field name='percentage_conf_personnels' optional="hide" />
                    <field name='percentage_conf_materiel' optional="hide" />
                    <field name="penalite_plafone" optional="hide" />
                    <field name="penalite_plafone_gap" optional="hide" />
                    <field name="montant_total_penalite" optional="hide" />
                    <field name="montant_total_penalite_gap" optional="hide" />

                </xpath>


            </field>
        </record>

        <record
            model="ir.ui.view" id="view_project_kanban_action">
            <field name="name">project.project.kanban.action</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.view_project_kanban" />
            <field name="arch" type="xml">
                <!-- <xpath expr="//kanban" position="attributes">
                    <attribute name="action"></attribute>
                </xpath> -->


                <a class="o_project_kanban_box" position="replace">
                    <a class="o_project_kanban_box" name="%(project.project_update_all_action)d"
                        type="action">
                        <div>
                            <span class="o_value">
                                <field name="update_count" />

                                <!-- <t t-esc="record.update_count.value"/> -->
                            </span>
                            <span class="o_label ms-1">
                                Historique des changements
                            </span>
                        </div>
                    </a>

                </a>


                <field name="partner_id" position="after">
                    <field name="autorite_contractante" />
                    <field name="montant_initial" />
                    <field name="calculated_achievement" />
                    <field name="last_update_consom_delai" />
                    <field name="delai_execution" />
                    <field name="last_update_consom_delai" />
                    <field name="market_type_id" />
                    <field name="date_start" />
                    <field name="date" />
                    <field name="currency_id" />
                </field>
                <field name="partner_id" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
                <div class="o_kanban_card_content mw-100" position="inside">
                    <div class="o_kanban_record_headings">

                        <div class="row">

                            <div class="col">

                                <span class="o_text_overflow" t-if="record.montant_initial.value">
                                    <span class="fa fa-money me-2" aria-label="Montant"
                                        title="Montant"></span>

                                    <field name="montant_initial" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />

                                </span>

                            </div>
                            <div class="col">
                                <div t-if="record.market_type_id.value"
                                    class="o_text_overflow text-muted">
                                    <span class="fa fa-keyboard" aria-label="Type" title="Type"></span>

                                    <field name="market_type_id" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <span class="fa fa-trophy" aria-label="Avancement"
                                    title="Avancement"></span> Avancement <field
                                    name="calculated_achievement" widget="progressbar_no_rounding" />

                            </div>


                            <div class="col" t-if="record.last_update_consom_delai.value">
                                <span class="fa fa-calendar-times-o" aria-label="Délai consommé"
                                    title="Délai consommé"></span> Délai Consom <field
                                    name="last_update_consom_delai"
                                    widget="project_custom_progressbar" />

                            </div>


                        </div>
                    </div>
                </div>
                <xpath expr="//kanban/templates/t/div/div/div/div/div/div[hasclass('o_row')]"
                    position="replace">
                    <div class="row" t-if="record.autorite_contractante.value">

                        <div class="row">
                            <div class="col">
                                <span class="o_text_overflow"
                                    t-if="record.autorite_contractante.value">

                                    <span class="fa fa-users me-2"
                                        aria-label="Autorité contractante"
                                        title="Autorité contractante"></span>
                                    <t t-esc="record.autorite_contractante.value" />
                                </span>
                            </div>
                        </div>

                        <div t-if="record.date.raw_value or record.date_start.raw_value"
                            class="text-muted o_row">
                            <span class="fa fa-clock-o me-2" title="Date prévue"></span>
                            <field name="date_start" />
                            <i t-if="record.date.raw_value and record.date_start.raw_value"
                                class="fa fa-long-arrow-right mx-2 oe_read_only"
                                aria-label="Arrow icon" title="Arrow" />
                            <field name="date" />
                        </div>
                        <div class="row">
                            <div class="col">
                                <span class="o_text_overflow" t-if="record.delai_execution.value">

                                    <span class="fa fa-calendar-o me-2" aria-label="Delai Exec"
                                        title="Delai Exec" />
                                    <t t-esc="record.delai_execution.value"
                                        class="me-2 mx-2" /> Jours </span>

                            </div>
                        </div>


                        <!-- <i t-if="record.date.raw_value and record.date_start.raw_value"
                        class="fa fa-long-arrow-right" aria-label="Arrow icon" title="Arrow"/> -->


                    </div>
                </xpath>

                <xpath expr="//kanban/templates/t/div/div/div/div/div/span[hasclass('text-muted')]"
                    position="replace">

                    <!-- <div/> -->

                </xpath>
                <xpath expr="//kanban/templates/t/div/div/div/div/div/field[@name='tag_ids']"
                    position="replace">

                    <!-- <div/> -->

                </xpath>

            </field>
        </record>
        <record
            id="view_project_project_map" model="ir.ui.view">
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <!-- <leaflet_map field_address_id="id" field_latitude="latitude"
                field_longitude="longitude" display_name="display_name"
                field_address="display_address" field_geolocations="geolocation_ids"/> -->
                <leaflet_map field_address_id="id" display_name="display_name"
                    field_geolocations="geolocation_ids" />
            </field>
        </record>

        <!-- modify project_view action action to include all 3(list, graph,pivot) view types-->
        <!-- Please update both act_window when modifying one (open_view_project_all or
        open_view_project_all_group_stage) as one or the other is used in the menu menu_project -->
        <record
            id="project.open_view_project_all_group_stage" model="ir.actions.act_window">
            <field name="name">Marchés</field>
            <field name="res_model">project.project</field>
            <field name="context">{'search_default_group_by_autorite_contractante': 1}</field>
            <field name="domain">[]</field>
            <field name="view_mode">tree,kanban,leaflet_map,form</field>
            <field name="view_id" ref="project.view_project" />
            <field name="search_view_id"
                ref="project_customization.view_project_project_filter_custom" />
            <field name="target">main</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No projects found. Let's create one!
                </p>
                <p>
                    Projects contain tasks on the same topic, and each has its own dashboard.
                </p>
            </field>
        </record>
        <record
            id="project.open_view_project_all_group_stage_kanban_view"
            model="ir.actions.act_window.view">
            <field name="sequence" eval="11" />
            <field name="view_mode">kanban</field>
            <field name="act_window_id" ref="project.open_view_project_all_group_stage" />
            <field name="view_id" ref="project.project_kanban_view_group_stage" />
        </record>
        <record
            id="project.open_view_project_all_group_stage_kanban_view"
            model="ir.actions.act_window.view">
            <field name="sequence" eval="11" />
            <field name="view_mode">kanban</field>
            <field name="act_window_id" ref="project.open_view_project_all" />
            <field name="view_id" ref="project.project_kanban_view_group_stage" />
        </record>
        <record
            id="action_projects_view_map" model="ir.actions.act_window.view">
            <field name="sequence" eval="100" />
            <field name="view_mode">leaflet_map</field>
            <field name="act_window_id" ref="project.open_view_project_all_group_stage" />
            <field name="view_id" ref="view_project_project_map" />
        </record>
        <record
            id="action_projects_view_map" model="ir.actions.act_window.view">
            <field name="sequence" eval="100" />
            <field name="view_mode">leaflet_map</field>
            <field name="act_window_id" ref="project.open_view_project_all" />
            <field name="view_id" ref="view_project_project_map" />
        </record>
        <!-- Please update both act_window when modifying one (open_view_project_all or
        open_view_project_all_group_stage) as one or the other is used in the menu menu_project -->


        <!-- modify project_task action to include all 3(list, graph,pivot) view types -->
        <record
            id="project.action_project_task_user_tree" model="ir.actions.act_window">
            <field name="name">Tasks Analysis</field>
            <field name="res_model">report.project.task.user</field>
            <field name="view_mode">kanban,tree,form,graph,pivot</field>
            <field name="search_view_id" ref="project.view_task_project_user_search" />
            <field name="context">{'group_by':['state']}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_empty_folder">
                    No data yet!
                </p>
                <p>
                    Analyze the progress of your projects and the performance of your employees.
                </p>
            </field>
        </record>


        <!-- <record id="view_project_project_filter_inherit" model="ir.ui.view">
            <field name="name">project.project.search.inhrit</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.view_project_project_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//search/field[@name='name']" position="before">
                    <field name="numero_marche" string="Numéro"/>
                    <field name="name" string="Objet"/>
                    <field name="autorite_contractante" string="Autorité contractante"/>
                    <field name="titulaires" string="Titulaire"/>
                </xpath>
                <xpath expr="//search/field[@name='partner_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

                <xpath expr="//filter[@name='own_projects']" position="before">
                    <filter name="mission_object" string="Objet d'une mission" domain="[('mission_ids', '!=',False)]"/>
                    <separator/>
                    <filter name="big_projects" string="Les grands marchés" domain="[('tag_ids.name','in',['grands
        marchés'])]"/>
                    <separator/>
                    <filter string="Montant &gt; 7000000" name="Montant" domain="[('budget', '&gt;',7000000)]" />
                    <separator/>
                    <filter string="décaissement dépasse avancement" name="decaissement_depasse_av"
        domain="[('decaissement_depasse_av','=',True)]" />
                    <separator/>
                    <filter string="Delai consommé &gt; 100%" name="last_update_consom_delai"
        domain="[('last_update_consom_delai','&gt;',100)]" />
                    <separator/>
                    <filter string="Avancement &lt; 20%" name="avancement" domain="[('calculated_achievement',
        '&lt;',20)]" />
                    <separator/>
                    <filter string="Décaissement &gt; 50%" name="decaissement"
        domain="[('project_debit_gap','&gt;',50)]" />

                </xpath>
                <xpath expr="//filter[@name='Manager']" position="before">
                    <filter string="Numéro du marché" name="name" context="{'group_by': 'numero_marche'}"/>
                    <filter string="Type du marché" name="Type" context="{'group_by': 'market_type_id'}"/>
                    <filter string="Autorité contractante" name="group_by_autorite_contractante" context="{'group_by':
        'autorite_contractante'}"/>
                    <filter string="Titulaire" name="Titulaire" context="{'group_by': 'titulaires'}"/>
                    <filter string="Plage d’avancement" name="plage" context="{'group_by': 'plage'}"/>
                </xpath>
                <xpath expr="//filter[@name='status']" position="after">
                    <filter string="Statut D.Mission" name="Statut Mission" context="{'group_by':
        'last_update_status_mission'}"/>
                    <filter string="Statut D.Collecte" name="Statut Collecte" context="{'group_by':
        'status_collect'}"/>
                </xpath>

                <filter string="Statut D.Mission" name="Statut Mission" context="{'group_by':
        'last_update_status_mission'}"/>
                <filter string="Statut D.Collecte" name="Statut Collecte" context="{'group_by':
        'status_collect'}"/>


            </field>
        </record> -->

        <!--                    <filter string="Travaux" name="market_type_name" domain="[('market_type_name', '=',
        'Travaux')]"/>-->

        <!--                    <filter string="Fournitures" name="market_type_name" domain="[('market_type_name', '=',
        'Fournitures')]"/>-->
        <!--                    <filter string="Services" name="market_type_name" domain="[('market_type_name', '=',
        'Services')]"/>-->

        <!--                    <filter string="Prestation intellectuelles" name="market_type_name"
        domain="[('market_type_name', '=', 'Prestation intellectuelles')]"/>-->
        <!--                    <filter string="Mixtes" name="market_type_name" domain="[('market_type_name', '=',
        'Mixtes')]"/>-->
        <!--                    <filter string="Projet interne" name="market_type_name" domain="[('market_type_name',
        '=', 'Projet interne')]"/>-->
        <!--                    <separator/>-->
        <!--                    <filter string="En bonne voie" name="last_update_status"
        domain="[('last_update_status', '=', 'on_track')]"/>-->
        <!--                    <filter string="En danger" name="last_update_status" domain="[('last_update_status',
        '=', 'at_risk')]"/>-->
        <!--                    <filter string="En retard" name="last_update_status" domain="[('last_update_status',
        '=', 'off_track')]"/>-->
        <!--                    <separator/>-->
        <!--                    <filter string="Numérotation" name="stage_id" domain="[('stage_id.name', '=',
        'Numbering')]"/>-->
        <!--                    <filter string="Execution monitoring" name="stage_id" domain='[("stage_id.name", "=",
        "Suivi d’exécution")]'/>-->
        <!--                    <filter string="Retrospective control" name="stage_id" domain='[("stage_id.name", "=",
        "Control à posteriori")]'/>-->
        <!--                    <separator/>-->

        <!--Default
        strategic projects filter on projects action-->
        <!-- desable search_default_my_tasks that block canban-->
        <record
            id="action_view_all_task_2" model="ir.actions.act_window">
            <field name="name">My Tasks</field>
            <field name="res_model">project.task</field>
            <field name="view_mode">kanban,tree,form,calendar,pivot,graph,activity</field>
            <field name="context">{'search_default_my_tasks': True, 'search_default_open_tasks': 1,
        'all_task': 0, 'default_user_ids': [(4, uid)]}</field>
            <field name="search_view_id" ref="project.view_task_search_form" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No tasks found. Let's create one!
                </p>
                <p> Organize your tasks by dispatching them across the pipeline.<br /> Collaborate
        efficiently by chatting in real-time or via email. </p>
            </field>
        </record>
        <menuitem
            name="My Tasks" id="project.menu_project_management" parent="project.menu_main_pm"
            action="action_view_all_task_2" sequence="2"
            groups="project.group_project_user,project_customization.group_project_supervisor,project_customization.follow_up_manager,project_customization.group_project_invited" />
        <!-- set default kanban group by to state -->
        <record
            id="crossovered_budget_canban_inherit" model="ir.ui.view">
            <field name="name">crossovered.budget.canban.inherit</field>
            <field name="model">crossovered.budget</field>
            <field name="inherit_id" ref="account_budget_oca.view_crossovered_budget_kanban" />
            <field name="arch" type="xml">
                <xpath expr="//kanban" position="attributes">
                    <attribute name="default_group_by">state</attribute>
                </xpath>
            </field>
        </record>
        <record
            id="view_project_config_kanban_inherit" model="ir.ui.view">
            <field name="name">view.project.config.kanban.inherit</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.view_project_config_kanban" />
            <field name="arch" type="xml">
                <xpath expr="//kanban" position="attributes">
                    <attribute name="default_group_by">stage_id</attribute>
                </xpath>
            </field>
        </record>

        <!-- deactivate view group -->
        <record
            id="project_list_view_group_stage_inherit" model="ir.ui.view">
            <field name="name">project.list.view.group.stage.inherit</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.project_list_view_group_stage" />
            <field name="arch" type="xml">
                <tree position="attributes">
                    <attribute name="default_group_by"></attribute>
                </tree>
            </field>
        </record>
        <!-- deactive sms and send mail actions -->

        <!-- <delete model="ir.actions.act_window" id="project.action_send_mail_project_project" /> -->
        <!-- <delete model="ir.actions.act_window"
        id="project_sms.project_project_act_window_sms_composer" /> -->
<record
            id="view_project_tree_passation" model="ir.ui.view">
            <field name="name">project.project.tree.custom</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <tree string="Projets">
                    <field name='name' string="Objet" />
                    <field name='autorite_contractante' />
                    <field name="passation_status" />
                    <field name="comments" />
                    <field name='titulaires' string="Titulaire" widget="many2many_tags"
                        optional="hide" />
                    <field name='market_type_id' optional="hide" />
                    <field name='currency_id' column_invisible="True" />
                    <field name="montant_initial" widget="monetary"
                        options="{'currency_field': 'currency_id'}" sum="Total" optional="hide" />
                    <field name="delai_execution" optional="hide" />
                </tree>
            </field>
        </record>

        <record
            id="view_project_form_passation" model="ir.ui.view">
            <field name="name">project.project.form.custom</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <form string="Projet">
                    <sheet>
                        <group>
                            <field name='name' string="Objet" />
                            <field name='autorite_contractante' />
                            <field name='titulaires' string="Titulaire" widget="many2many_tags" />
                            <field name='market_type_id' />
                            <field name='currency_id' invisible="True" />
                            <field name="montant_initial" widget="monetary"
                                options="{'currency_field': 'currency_id'}" sum="Total" />
                            <field name="delai_execution" />
                            <field name="data_file" />
                            <field name="passation_status" />
                            <!-- <field name="inscription_sur_ppm" /> -->
                            <field name="ppm_approval_date" />
                            <field name="ppm_publication_support" />
                            <field name="aao_publication_date" />
                            <field name="date_ouverture_offres" />
                            <field name="contract_signature_date" />
                            <field name="contract_approval_date" />
                        </group>
                        <group>
                            <field name="excluded_bidders_opening" />
                            <field name="evaluation_report_signature" />
                            <field name="evaluation_report_approval" />
                        </group>
                        <group>
                            <field name="detailed_offer_review" />
                            <field name="proposed_awardee_position" />
                            <field name="funder_non_objection_date" />
                            <field name="mi_opening_date" />
                            <field name="technical_proposal_submission_date" />
                            <field name="technical_evaluation_date" />
                            <field name="financial_proposal_opening" />
                            <!-- <field name="final_negotiation_pv" /> -->
                        </group>
                        <group string="Commentaires">
                            <field name="comments" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>
<record
            id="project_passation_actions" model="ir.actions.act_window">
            <field name="name">Actions</field>
            <field name="res_model">project.project</field>
            <field name="context">{'search_default_group_by_autorite_contractante': 1}</field>
            <field name="domain">[]</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_project_tree_passation')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_project_form_passation')})]"/>
            <field name="search_view_id"
                ref="project_customization.view_project_project_filter_custom" />
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No projects found. Let's create one!
                </p>
                <p>
                    Projects contain tasks on the same topic, and each has its own dashboard.
                </p>
            </field>
        </record>
        
        
        
    </data>
</odoo>